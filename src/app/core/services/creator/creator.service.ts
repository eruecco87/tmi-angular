import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

// RXJS
import { Observable, of } from 'rxjs';
import { delay } from 'rxjs/operators';

// Environment
import { environment } from '@env/environment';

// Models
import { Creator } from '@core/services/creator/models';

@Injectable({
  providedIn: 'root'
})
export class CreatorService {

  private endpoint = 'creators';

  public mockGet: Creator[][] = [
    [{"id":2,"name":"mz4250","miniCount":2214,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/mz4250"},{"siteName":"Shapeways","url":"https://www.shapeways.com/designer/mz4250"},{"siteName":"Patreon","url":"https://www.patreon.com/mz4250"},{"siteName":"PrusaPrinters","url":"https://www.prusaprinters.org/social/39782-MZ4250"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/mz4250"}]},{"id":3,"name":"dutchmogul ","miniCount":1092,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/dutchmogul"},{"siteName":"Patreon","url":"https://www.patreon.com/illgottengames"},{"siteName":"Website","url":"http://www.illgottengames.net"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/dutchmogul"}]},{"id":1022,"name":"rocket_pig_games","miniCount":892,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/rocketpiggames"},{"siteName":"Patreon","url":"https://www.patreon.com/rocketpiggames"},{"siteName":"Website","url":"https://www.rocketpiggames.com"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/RocketPigGames"}]},{"id":1163,"name":"castnplay","miniCount":493,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/castnplay"},{"siteName":"Gumroad","url":"https://gumroad.com/castnplay"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/CastnPlay"}]},{"id":4,"name":"devonjones","miniCount":439,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/devonjones"},{"siteName":"Patreon","url":"https://www.patreon.com/masterworktools"}]},{"id":1099,"name":"onmioji","miniCount":387,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/onmioji"},{"siteName":"Patreon","url":"https://www.patreon.com/onmioji"},{"siteName":"Website","url":"https://www.artstation.com/stanislavkuznetsov"},{"siteName":"Gumroad","url":"https://gumroad.com/onmioji"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Onmioji"}]},{"id":1054,"name":"schlossbauer","miniCount":337,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/schlossbauer"},{"siteName":"Patreon","url":"https://www.patreon.com/Schlossbauer"},{"siteName":"Website","url":"https://twitter.com/schlossbauer1"}]},{"id":1187,"name":"ArtisanGuild","miniCount":305,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/ArtisanGuild"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Artisan_Guild"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Artisan_Guild"}]},{"id":1017,"name":"M3DM","miniCount":301,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/M3DM"},{"siteName":"Patreon","url":"https://www.patreon.com/M3DM"},{"siteName":"Website","url":"https://www.youtube.com/channel/UCAykcp3iICyHCiDGiwHFUUQ"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/M3DM"}]},{"id":1764,"name":"Ghamak","miniCount":292,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Francesco_A"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Ghamak"},{"siteName":"Patreon","url":"https://www.patreon.com/ghamak"}]},{"id":1015,"name":"DuncanShadow","miniCount":290,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/DuncanShadow"},{"siteName":"Patreon","url":"https://www.patreon.com/Duncan_shadow"},{"siteName":"Website","url":"https://www.duncanshadow.com"},{"siteName":"DuncanShadow","url":"https://www.duncanshadow.com/"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/DuncanShadow"}]},{"id":1194,"name":"PrintedObsession","miniCount":239,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/printedobsession"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/c4th"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/printedobsession"}]},{"id":1426,"name":"GoonMasterGames","miniCount":235,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/GoonMasterGames"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/GoonMasterGames"},{"siteName":"Patreon","url":"https://www.patreon.com/GoonMasterGames"}]},{"id":2216,"name":"Crosslances","miniCount":223,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Crosslances"}]},{"id":1,"name":"Valandar","miniCount":206,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Valandar"},{"siteName":"Patreon","url":"https://www.patreon.com/Valandar"},{"siteName":"Gumroad","url":"https://gumroad.com/valandar"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Valandar"}]},{"id":1700,"name":"rnestudio","miniCount":176,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/rnestudio"},{"siteName":"Patreon","url":"https://www.patreon.com/rnestudio"}]},{"id":5,"name":"ecaroth","miniCount":174,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/ecaroth"},{"siteName":"Website","url":"https://www.heroshoard.com"}]},{"id":1101,"name":"Velrock","miniCount":171,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Velrock"},{"siteName":"Patreon","url":"https://www.patreon.com/velrockart"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Velrock"}]},{"id":1009,"name":"Syllogy","miniCount":160,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Syllogy"},{"siteName":"Patreon","url":"https://www.patreon.com/Syllogy"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Syllogy"}]},{"id":1666,"name":"2ndDynasty","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/2ndDynasty"}]},{"id":1762,"name":"TitanForgeMiniatures","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/TitanForgeMiniatures"},{"siteName":"Patreon","url":"https://www.patreon.com/titanforgeminis"}]}],
    [{"id":2,"name":"mz4250","miniCount":2214,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/mz4250"},{"siteName":"Shapeways","url":"https://www.shapeways.com/designer/mz4250"},{"siteName":"Patreon","url":"https://www.patreon.com/mz4250"},{"siteName":"PrusaPrinters","url":"https://www.prusaprinters.org/social/39782-MZ4250"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/mz4250"}]},{"id":3,"name":"dutchmogul ","miniCount":1092,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/dutchmogul"},{"siteName":"Patreon","url":"https://www.patreon.com/illgottengames"},{"siteName":"Website","url":"http://www.illgottengames.net"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/dutchmogul"}]},{"id":1022,"name":"rocket_pig_games","miniCount":892,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/rocketpiggames"},{"siteName":"Patreon","url":"https://www.patreon.com/rocketpiggames"},{"siteName":"Website","url":"https://www.rocketpiggames.com"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/RocketPigGames"}]},{"id":1163,"name":"castnplay","miniCount":493,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/castnplay"},{"siteName":"Gumroad","url":"https://gumroad.com/castnplay"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/CastnPlay"}]},{"id":4,"name":"devonjones","miniCount":439,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/devonjones"},{"siteName":"Patreon","url":"https://www.patreon.com/masterworktools"}]},{"id":1099,"name":"onmioji","miniCount":387,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/onmioji"},{"siteName":"Patreon","url":"https://www.patreon.com/onmioji"},{"siteName":"Website","url":"https://www.artstation.com/stanislavkuznetsov"},{"siteName":"Gumroad","url":"https://gumroad.com/onmioji"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Onmioji"}]},{"id":1054,"name":"schlossbauer","miniCount":337,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/schlossbauer"},{"siteName":"Patreon","url":"https://www.patreon.com/Schlossbauer"},{"siteName":"Website","url":"https://twitter.com/schlossbauer1"}]},{"id":1187,"name":"ArtisanGuild","miniCount":305,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/ArtisanGuild"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Artisan_Guild"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Artisan_Guild"}]},{"id":1017,"name":"M3DM","miniCount":301,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/M3DM"},{"siteName":"Patreon","url":"https://www.patreon.com/M3DM"},{"siteName":"Website","url":"https://www.youtube.com/channel/UCAykcp3iICyHCiDGiwHFUUQ"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/M3DM"}]},{"id":1764,"name":"Ghamak","miniCount":292,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Francesco_A"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Ghamak"},{"siteName":"Patreon","url":"https://www.patreon.com/ghamak"}]},{"id":1015,"name":"DuncanShadow","miniCount":290,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/DuncanShadow"},{"siteName":"Patreon","url":"https://www.patreon.com/Duncan_shadow"},{"siteName":"Website","url":"https://www.duncanshadow.com"},{"siteName":"DuncanShadow","url":"https://www.duncanshadow.com/"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/DuncanShadow"}]},{"id":1194,"name":"PrintedObsession","miniCount":239,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/printedobsession"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/c4th"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/printedobsession"}]},{"id":1426,"name":"GoonMasterGames","miniCount":235,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/GoonMasterGames"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/GoonMasterGames"},{"siteName":"Patreon","url":"https://www.patreon.com/GoonMasterGames"}]},{"id":2216,"name":"Crosslances","miniCount":223,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Crosslances"}]},{"id":1,"name":"Valandar","miniCount":206,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Valandar"},{"siteName":"Patreon","url":"https://www.patreon.com/Valandar"},{"siteName":"Gumroad","url":"https://gumroad.com/valandar"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Valandar"}]},{"id":1700,"name":"rnestudio","miniCount":176,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/rnestudio"},{"siteName":"Patreon","url":"https://www.patreon.com/rnestudio"}]},{"id":5,"name":"ecaroth","miniCount":174,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/ecaroth"},{"siteName":"Website","url":"https://www.heroshoard.com"}]},{"id":1101,"name":"Velrock","miniCount":171,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Velrock"},{"siteName":"Patreon","url":"https://www.patreon.com/velrockart"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Velrock"}]},{"id":1009,"name":"Syllogy","miniCount":160,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Syllogy"},{"siteName":"Patreon","url":"https://www.patreon.com/Syllogy"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Syllogy"}]},{"id":1666,"name":"2ndDynasty","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/2ndDynasty"}]},{"id":1762,"name":"TitanForgeMiniatures","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/TitanForgeMiniatures"},{"siteName":"Patreon","url":"https://www.patreon.com/titanforgeminis"}]}],
    [{"id":2,"name":"mz4250","miniCount":2214,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/mz4250"},{"siteName":"Shapeways","url":"https://www.shapeways.com/designer/mz4250"},{"siteName":"Patreon","url":"https://www.patreon.com/mz4250"},{"siteName":"PrusaPrinters","url":"https://www.prusaprinters.org/social/39782-MZ4250"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/mz4250"}]},{"id":3,"name":"dutchmogul ","miniCount":1092,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/dutchmogul"},{"siteName":"Patreon","url":"https://www.patreon.com/illgottengames"},{"siteName":"Website","url":"http://www.illgottengames.net"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/dutchmogul"}]},{"id":1022,"name":"rocket_pig_games","miniCount":892,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/rocketpiggames"},{"siteName":"Patreon","url":"https://www.patreon.com/rocketpiggames"},{"siteName":"Website","url":"https://www.rocketpiggames.com"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/RocketPigGames"}]},{"id":1163,"name":"castnplay","miniCount":493,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/castnplay"},{"siteName":"Gumroad","url":"https://gumroad.com/castnplay"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/CastnPlay"}]},{"id":4,"name":"devonjones","miniCount":439,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/devonjones"},{"siteName":"Patreon","url":"https://www.patreon.com/masterworktools"}]},{"id":1099,"name":"onmioji","miniCount":387,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/onmioji"},{"siteName":"Patreon","url":"https://www.patreon.com/onmioji"},{"siteName":"Website","url":"https://www.artstation.com/stanislavkuznetsov"},{"siteName":"Gumroad","url":"https://gumroad.com/onmioji"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Onmioji"}]},{"id":1054,"name":"schlossbauer","miniCount":337,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/schlossbauer"},{"siteName":"Patreon","url":"https://www.patreon.com/Schlossbauer"},{"siteName":"Website","url":"https://twitter.com/schlossbauer1"}]},{"id":1187,"name":"ArtisanGuild","miniCount":305,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/ArtisanGuild"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Artisan_Guild"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Artisan_Guild"}]},{"id":1017,"name":"M3DM","miniCount":301,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/M3DM"},{"siteName":"Patreon","url":"https://www.patreon.com/M3DM"},{"siteName":"Website","url":"https://www.youtube.com/channel/UCAykcp3iICyHCiDGiwHFUUQ"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/M3DM"}]},{"id":1764,"name":"Ghamak","miniCount":292,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Francesco_A"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Ghamak"},{"siteName":"Patreon","url":"https://www.patreon.com/ghamak"}]},{"id":1015,"name":"DuncanShadow","miniCount":290,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/DuncanShadow"},{"siteName":"Patreon","url":"https://www.patreon.com/Duncan_shadow"},{"siteName":"Website","url":"https://www.duncanshadow.com"},{"siteName":"DuncanShadow","url":"https://www.duncanshadow.com/"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/DuncanShadow"}]},{"id":1194,"name":"PrintedObsession","miniCount":239,"sourceSites":[{"siteName":"Patreon","url":"https://www.patreon.com/printedobsession"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/c4th"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/printedobsession"}]},{"id":1426,"name":"GoonMasterGames","miniCount":235,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/GoonMasterGames"},{"siteName":"Thingiverse","url":"https://www.thingiverse.com/GoonMasterGames"},{"siteName":"Patreon","url":"https://www.patreon.com/GoonMasterGames"}]},{"id":2216,"name":"Crosslances","miniCount":223,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Crosslances"}]},{"id":1,"name":"Valandar","miniCount":206,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Valandar"},{"siteName":"Patreon","url":"https://www.patreon.com/Valandar"},{"siteName":"Gumroad","url":"https://gumroad.com/valandar"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Valandar"}]},{"id":1700,"name":"rnestudio","miniCount":176,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/rnestudio"},{"siteName":"Patreon","url":"https://www.patreon.com/rnestudio"}]},{"id":5,"name":"ecaroth","miniCount":174,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/ecaroth"},{"siteName":"Website","url":"https://www.heroshoard.com"}]},{"id":1101,"name":"Velrock","miniCount":171,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Velrock"},{"siteName":"Patreon","url":"https://www.patreon.com/velrockart"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Velrock"}]},{"id":1009,"name":"Syllogy","miniCount":160,"sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/Syllogy"},{"siteName":"Patreon","url":"https://www.patreon.com/Syllogy"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/Syllogy"}]},{"id":1666,"name":"2ndDynasty","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/2ndDynasty"}]},{"id":1762,"name":"TitanForgeMiniatures","miniCount":153,"sourceSites":[{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/TitanForgeMiniatures"},{"siteName":"Patreon","url":"https://www.patreon.com/titanforgeminis"}]}]
  ];

  public mockGetById: Creator = {"id":2,"name":"mz4250","sourceSites":[{"siteName":"Thingiverse","url":"https://www.thingiverse.com/mz4250"},{"siteName":"Shapeways","url":"https://www.shapeways.com/designer/mz4250"},{"siteName":"Patreon","url":"https://www.patreon.com/mz4250"},{"siteName":"PrusaPrinters","url":"https://www.prusaprinters.org/social/39782-MZ4250"},{"siteName":"MyMiniFactory","url":"https://www.myminifactory.com/users/mz4250"}]};

  constructor(
    private httpClient: HttpClient
  ) { }

  public get(pageIndex: number, searchString: string = null): Observable<Creator[]> {

    if (environment.api.enableMocks) {

      return of(this.mockGet[pageIndex - 1]).pipe(
        delay(environment.api.mockDelay)
      );

    }

    let params = {
      pageIndex: encodeURIComponent(pageIndex)
    }

    if (searchString) { params['searchString'] = encodeURIComponent(searchString) }

    return this.httpClient.get<Creator[]>(`${ environment.api.url }/${ this.endpoint }/browse`, { params });

  }

  public getById(id: string): Observable<Creator> {

    if (environment.api.enableMocks) {

      return of(this.mockGetById).pipe(
        delay(environment.api.mockDelay)
      );

    }

    return this.httpClient.get<Creator>(`${ environment.api.url }/${ this.endpoint }/view`, {
      params: {
        id: encodeURIComponent(id)
      }
    });

  }
}
